<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".gen.cs" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ assembly name="System.Core" #><#
  var samplesDir = new DirectoryInfo(this.Host.ResolvePath("Samples"));
  var index = samplesDir.FullName.IndexOf("test") - 1;
  var relative = "." + samplesDir.FullName.Substring(index);
  var gitFile = samplesDir.GetFiles("git-details.txt")[0];
  string gitDetails;
  using (var gitText = gitFile.OpenText()) {
    gitDetails = gitText.ReadToEnd();
  }#>
// Generated from <#= relative #>
// Collected from <#= gitDetails #>

namespace GqlPlus;

<#  foreach (var dir in samplesDir.EnumerateDirectories()) { #>
public class Sample<#= dir.Name #>Data
  : TheoryData<string>
{
  public Sample<#= dir.Name #>Data()
  {
<#    foreach (var file in dir.EnumerateFiles("*.g*").OrderBy(f => f.Name)) { #>
    Add("<#= Path.ChangeExtension(file.Name, null) #>");
<#    } #>
  }
}
<#  } #>
