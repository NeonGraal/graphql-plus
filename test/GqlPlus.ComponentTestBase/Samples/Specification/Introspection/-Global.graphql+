output _AndType {
    : _Named
        type: _Type
    | _Type
    }

output _Categories {
    : _AndType
        category: _Category
    | _Category
    }

output _Category {
    : _Aliased
        resolution: _Resolution
        output: _TypeRef<_TypeKind.Output>
        modifiers: _Modifiers[]
    }

enum _Resolution { Parallel Sequential Single }

output _Directives {
    : _AndType
        directive: _Directive
    | _Directive
    }

output _Directive {
    : _Aliased
        parameters: _InputParam[]
        repeatable: Boolean
        locations: _[_Location]
    }

enum _Location { Operation Variable Field Inline Spread Fragment }

output _Operations {
        operation: _Operation
        type: _Type
    | _Operation
    | _Type
}

output _OpDirectives {
    : _Named
        directives: _OpDirective[]
}

output _Operation {
    : _Aliased
        category: _Name
        variables: _OpVariable[_Name]
        directives: _OpDirective[]
        fragments: _OpFragment[_Name]
        result: _OpResult
        selections: _OpSelection[][_Path]
}

output _OpVariable {
    : _OpDirectives
        type: _TypeRef<_TypeKind.Input>
        modifiers: _Modifiers[]
        default: Value?
}

dual _OpDirective {
    : _Named
        argument: _OpArgument?
}

output _OpFragment {
    : _OpDirectives
        type: _TypeRef<_TypeKind.Output>
}

dual _OpArgument {
    |   _OpArgValue
    |   _OpArgList
    |   _OpArgMap
    }

dual _OpArgValue {
        variable: _Name
    |   Value
    }

dual _OpArgList {
    | _OpArgValue[]
    }

dual _OpArgMap {
        value: _OpArgValue
        byVariable: _Name
    | _OpArgValue[Scalar]
    }

output _OpResult {
        argument: _OpArgument?
    | _TypeRef<_SimpleKind>
}

domain _Path { String /(\$([A-Za-z]\w*)?|\.+)?\d+(\.\d+)*/ }

output _OpSelection {
    |   _OpField
    |   _OpSpread
    |   _OpInline
}

output _OpField {
    : _OpDirectives
        alias: String?
        argument: _OpArgument?
        modifiers: _Modifiers[]
}

output _OpInline {
        type: _TypeRef<_TypeKind.Output>?
        directives: _OpDirective[]
}

output _OpSpread {
        fragment: String
        directives: _OpDirective[]
}

output _Setting {
    : _Named
        value: Value
    }

